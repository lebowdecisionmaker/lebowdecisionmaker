import{S as ie,o as Ee,a as qe,s as ee,b as Ne,c as v,U as F,g as oe,d as e,e as de,f as Ae,h as Le,i as Te,j as je,p as Me,L as De,P as Ce,k as Fe,u as _e,B as Ye,R as Ue,l as ge,m as Be,n as He,q as Qe,r as Ge,t as Ke,v as he,w as ue,x as Ze,y as ze,z as Ve,A as we,C as Je,D as ye,E as We,F as me,G as H,H as z,I as re,J as h,K as Se,M as m,N as w,O as c,Q as L,T as se,V as Re,W as pe,X as Xe,Y as Z,Z as $e,_ as et}from"./index-DuksrISo.js";import{e as ne,s as tt,i as le,g as at,a as rt,b as st}from"./databaseService-DIqG4je0.js";function ae(o,y=null,x){if(typeof o!="object"||o===null||ie in o)return o;const T=Le(o);if(T!==Ee&&T!==qe)return o;var d=new Map,S=Te(o),k=ee(0);S&&d.set("length",ee(o.length));var P;return new Proxy(o,{defineProperty(i,t,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&Ne();var r=d.get(t);return r===void 0?(r=ee(a.value),d.set(t,r)):v(r,ae(a.value,P)),!0},deleteProperty(i,t){var a=d.get(t);if(a===void 0)t in i&&d.set(t,ee(F));else{if(S&&typeof t=="string"){var r=d.get("length"),s=Number(t);Number.isInteger(s)&&s<r.v&&v(r,s)}v(a,F),xe(k)}return!0},get(i,t,a){var E;if(t===ie)return o;var r=d.get(t),s=t in i;if(r===void 0&&(!s||(E=oe(i,t))!=null&&E.writable)&&(r=ee(ae(s?i[t]:F,P)),d.set(t,r)),r!==void 0){var p=e(r);return p===F?void 0:p}return Reflect.get(i,t,a)},getOwnPropertyDescriptor(i,t){var a=Reflect.getOwnPropertyDescriptor(i,t);if(a&&"value"in a){var r=d.get(t);r&&(a.value=e(r))}else if(a===void 0){var s=d.get(t),p=s==null?void 0:s.v;if(s!==void 0&&p!==F)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return a},has(i,t){var p;if(t===ie)return!0;var a=d.get(t),r=a!==void 0&&a.v!==F||Reflect.has(i,t);if(a!==void 0||de!==null&&(!r||(p=oe(i,t))!=null&&p.writable)){a===void 0&&(a=ee(r?ae(i[t],P):F),d.set(t,a));var s=e(a);if(s===F)return!1}return r},set(i,t,a,r){var g;var s=d.get(t),p=t in i;if(S&&t==="length")for(var E=a;E<s.v;E+=1){var Y=d.get(E+"");Y!==void 0?v(Y,F):E in i&&(Y=ee(F),d.set(E+"",Y))}s===void 0?(!p||(g=oe(i,t))!=null&&g.writable)&&(s=ee(void 0),v(s,ae(a,P)),d.set(t,s)):(p=s.v!==F,v(s,ae(a,P)));var N=Reflect.getOwnPropertyDescriptor(i,t);if(N!=null&&N.set&&N.set.call(r,a),!p){if(S&&typeof t=="string"){var R=d.get("length"),_=Number(t);Number.isInteger(_)&&_>=R.v&&v(R,_+1)}xe(k)}return!0},ownKeys(i){e(k);var t=Reflect.ownKeys(i).filter(s=>{var p=d.get(s);return p===void 0||p.v!==F});for(var[a,r]of d)r.v!==F&&!(a in i)&&t.push(a);return t},setPrototypeOf(){Ae()}})}function xe(o,y=1){v(o,o.v+y)}function be(o){for(var y=de,x=de;y!==null&&!(y.f&(Ye|Ue));)y=y.parent;try{return ge(y),o()}finally{ge(x)}}function ve(o,y,x,T){var W;var d=(x&Be)!==0,S=!He||(x&Qe)!==0,k=(x&Ge)!==0,P=(x&ze)!==0,i=!1,t;k?[t,i]=je(()=>o[y]):t=o[y];var a=ie in o||Ke in o,r=((W=oe(o,y))==null?void 0:W.set)??(a&&k&&y in o?l=>o[y]=l:void 0),s=T,p=!0,E=!1,Y=()=>(E=!0,p&&(p=!1,P?s=_e(T):s=T),s);t===void 0&&T!==void 0&&(r&&S&&Me(),t=Y(),r&&r(t));var N;if(S)N=()=>{var l=o[y];return l===void 0?Y():(p=!0,E=!1,l)};else{var R=be(()=>(d?he:ue)(()=>o[y]));R.f|=De,N=()=>{var l=e(R);return l!==void 0&&(s=void 0),l===void 0?s:l}}if(!(x&Ce))return N;if(r){var _=o.$$legacy;return function(l,O){return arguments.length>0?((!S||!O||_||i)&&r(O?N():l),l):N()}}var g=!1,u=!1,A=Ze(t),C=be(()=>he(()=>{var l=N(),O=e(A);return g?(g=!1,u=!0,O):(u=!1,A.v=l)}));return d||(C.equals=Fe),function(l,O){if(Ve!==null&&(g=u,N(),e(A)),arguments.length>0){const U=O?e(C):S&&k?ae(l):l;return C.equals(U)||(g=!0,v(A,U),E&&s!==void 0&&(s=U),_e(()=>e(C))),l}return e(C)}}var nt=m('<li class="svelte-g9x8pv"><p class="question-text svelte-g9x8pv"> </p> <p class="answer-text svelte-g9x8pv"> </p></li>'),lt=m('<ul class="svelte-g9x8pv"></ul>'),vt=m('<p class="no-answers svelte-g9x8pv">No answers for this topic</p>'),it=m('<div class="result-card svelte-g9x8pv"><h2 class="svelte-g9x8pv"> </h2> <div class="percentage-bar svelte-g9x8pv"><div class="percentage-fill svelte-g9x8pv"></div></div> <p class="percentage-text svelte-g9x8pv"> </p> <p class="points-text svelte-g9x8pv"> </p> <div class="answers-section svelte-g9x8pv"><h3 class="svelte-g9x8pv">Supporting Answers:</h3> <!></div></div>'),ot=m('<p class="svelte-g9x8pv">You are most suited for <strong class="svelte-g9x8pv"> </strong></p>'),ut=m('<strong class="svelte-g9x8pv"> </strong> and <strong class="svelte-g9x8pv"> </strong>',1),ct=m('<strong class="svelte-g9x8pv"> </strong><!><!>',1),ft=m('<p class="svelte-g9x8pv">You are equally suited for <!></p>'),dt=m('<h2 class="svelte-g9x8pv">Conclusion</h2> <!>',1),_t=m('<div class="results-container svelte-g9x8pv"><h1 class="svelte-g9x8pv"> </h1> <div class="results-grid svelte-g9x8pv"></div> <div class="conclusion svelte-g9x8pv"><!></div> <div class="action-buttons svelte-g9x8pv"><button class="restart-button svelte-g9x8pv">Start Over</button> <button class="share-button svelte-g9x8pv">Share Results</button></div></div>');function gt(o,y){we(y,!1);let x=ve(y,"topicResults",28,()=>({})),T=ve(y,"onRestart",8),d=ve(y,"answerHistory",24,()=>[]),S=ve(y,"surveyName",8,"Survey");const k=()=>{const R=Math.max(...Object.values(x()).map(u=>u.count)),_=Object.entries(x()).filter(([u,A])=>A.count===R).map(([u])=>u);let g=`I just completed the "${S()}" survey!

`;_.length===1?g+=`My result: I am most suited for ${_[0]}

`:g+=`My result: I am equally suited for ${_.join(" and ")}

`,g+=`Take the survey yourself: ${window.location.href}`,navigator.share?navigator.share({title:`My ${S()} Results`,text:g,url:window.location.href}).catch(u=>{navigator.clipboard.writeText(g),alert("Results copied to clipboard!")}):(navigator.clipboard.writeText(g),alert("Results copied to clipboard!"))};Je(()=>(ye(x()),ye(d())),()=>{const R=Object.values(x()).reduce((_,g)=>_+g,0);x(Object.entries(x()).reduce((_,[g,u])=>(_[g]={count:u,percentage:R>0?Math.round(u/R*100):0,answers:d().filter(A=>A.topics.includes(g))},_),{}))}),We(),me();var P=_t(),i=c(P),t=c(i),a=w(i,2);ne(a,5,()=>Object.entries(x()),le,(R,_)=>{let g=()=>e(_)[0],u=()=>e(_)[1];var A=it(),C=c(A),W=c(C),l=w(C,4),O=c(l),U=w(l,2),n=c(U),f=w(U,2),b=w(c(f),2);{var M=q=>{var D=lt();ne(D,5,()=>u().answers,le,(G,V)=>{var J=nt(),I=c(J),j=c(I),K=w(I,2),X=c(K);z(()=>{L(j,e(V).question),L(X,`You chose: ${e(V).answer??""}`)}),h(G,J)}),h(q,D)},B=q=>{var D=vt();h(q,D)};H(b,q=>{u().answers.length>0?q(M):q(B,!1)})}z(()=>{tt(A,"style",`--percentage: ${u().percentage??""}%`),L(W,g()),L(O,`${u().percentage??""}%`),L(n,`(${u().count??""} points)`)}),h(R,A)});var r=w(a,2),s=c(r);{var p=R=>{var _=dt();const g=ue(()=>Math.max(...Object.values(x()).map(l=>l.count))),u=ue(()=>Object.entries(x()).filter(([l,O])=>O.count===e(g)).map(([l])=>l));var A=w(se(_),2);{var C=l=>{var O=ot(),U=w(c(O)),n=c(U);z(()=>L(n,e(u)[0])),h(l,O)},W=l=>{var O=ft(),U=w(c(O));{var n=b=>{var M=ut(),B=se(M),q=c(B),D=w(B,2),G=c(D);z(()=>{L(q,e(u)[0]),L(G,e(u)[1])}),h(b,M)},f=b=>{var M=Re(),B=se(M);ne(B,1,()=>e(u),le,(q,D,G)=>{var V=ct(),J=se(V),I=c(J),j=w(J);{var K=Q=>{var te=pe(",");h(Q,te)};H(j,Q=>{G<e(u).length-2&&Q(K)})}var X=w(j);{var $=Q=>{var te=pe("and");h(Q,te)};H(X,Q=>{G===e(u).length-2&&Q($)})}z(()=>L(I,e(D))),h(q,V)}),h(b,M)};H(U,b=>{e(u).length===2?b(n):b(f,!1)})}h(l,O)};H(A,l=>{e(u).length===1?l(C):l(W,!1)})}h(R,_)};H(s,R=>{Object.entries(x()).length>0&&R(p)})}var E=w(r,2),Y=c(E),N=w(Y,2);z(()=>L(t,`Your Results for "${S()??""}"`)),re("click",Y,function(...R){var _;(_=T())==null||_.apply(this,R)}),re("click",N,k),h(o,P),Se()}var ht=m('<div class="loading svelte-195lk2a">Loading...</div>'),yt=m('<div class="error svelte-195lk2a"><p> </p> <button class="svelte-195lk2a">Dismiss</button></div>'),pt=m('<button class="survey-button svelte-195lk2a"> </button>'),xt=m('<div class="survey-list svelte-195lk2a"></div>'),bt=m("<p>No surveys available. Please add some surveys first.</p>"),wt=m('<div class="survey-selection svelte-195lk2a"><h2 class="svelte-195lk2a">Select a Survey</h2> <!></div>'),mt=m('<button class="svelte-195lk2a"> </button>'),St=m('<div class="question-container svelte-195lk2a"><h3 class="svelte-195lk2a"> </h3> <h2 class="svelte-195lk2a"> </h2> <div class="button-container svelte-195lk2a"></div> <div class="progress svelte-195lk2a"> </div></div>'),Rt=m('<div class="no-questions svelte-195lk2a"><p>No questions available for this survey.</p> <button class="svelte-195lk2a">Select Another Survey</button></div>'),Pt=m('<div class="main-content svelte-195lk2a"><!></div>'),Ot=m('<main class="svelte-195lk2a"><!> <!> <!></main>');function Et(o,y){we(y,!1);let x=Z([]),T=Z(null),d=null,S=Z([]),k=Z(0),P=Z(),i=Z({}),t=Z(!1),a=Z([]),r=Z(!1),s=Z(null);Xe(async()=>{const f=new URLSearchParams(window.location.search).get("survey");if(f)try{await E(f)}catch{v(s,"Failed to load the requested survey."),await p()}else await p()});const p=async()=>{try{v(r,!0),v(x,await at()),v(r,!1)}catch(n){console.error("Error loading surveys:",n),v(s,"Failed to load surveys. Please try again later."),v(r,!1)}},E=async n=>{try{v(r,!0);const f=await rt(n),b=await st(n);if(!f||!b||b.length===0)throw new Error("Survey not found or has no questions");d=n,v(T,f),v(S,b),v(k,0),v(P,e(S)[e(k)]),v(i,(f.topics||[]).reduce((M,B)=>(M[B]=0,M),{})),v(r,!1)}catch(f){throw console.error("Error loading survey:",f),v(r,!1),f}},Y=async n=>{try{await E(n.id);const f=new URL(window.location);f.searchParams.set("survey",n.id),window.history.pushState({},"",f)}catch{v(s,"Failed to load the selected survey.")}},N=(n,f)=>{e(a).push({question:e(P).question,answer:f,topics:n}),n.forEach(b=>{$e(i,e(i)[b]++)}),R()},R=()=>{e(k)<e(S).length-1?(et(k),v(P,e(S)[e(k)])):v(t,!0)},_=()=>{v(T,null),d=null,v(t,!1),v(S,[]),v(k,0),v(P,null),v(a,[]),v(i,{});const n=new URL(window.location);n.searchParams.delete("survey"),window.history.pushState({},"",n)};me();var g=Ot(),u=c(g);{var A=n=>{var f=ht();h(n,f)};H(u,n=>{e(r)&&n(A)})}var C=w(u,2);{var W=n=>{var f=yt(),b=c(f),M=c(b),B=w(b,2);z(()=>L(M,e(s))),re("click",B,()=>v(s,null)),h(n,f)};H(C,n=>{e(s)&&n(W)})}var l=w(C,2);{var O=n=>{var f=ue(()=>{var b;return(b=e(T))==null?void 0:b.name});gt(n,{get topicResults(){return e(i)},onRestart:_,get answerHistory(){return e(a)},get surveyName(){return e(f)}})},U=n=>{var f=Re(),b=se(f);{var M=q=>{var D=wt(),G=w(c(D),2);{var V=I=>{var j=xt();ne(j,5,()=>e(x),le,(K,X)=>{var $=pt(),Q=c($);z(()=>L(Q,e(X).name)),re("click",$,()=>Y(e(X))),h(K,$)}),h(I,j)},J=I=>{var j=bt();h(I,j)};H(G,I=>{e(x).length>0?I(V):I(J,!1)})}h(q,D)},B=q=>{var D=Pt(),G=c(D);{var V=I=>{var j=St(),K=c(j),X=c(K),$=w(K,2),Q=c($),te=w($,2);ne(te,5,()=>e(P).buttons,le,(Ie,ce)=>{var fe=mt(),ke=c(fe);z(()=>L(ke,e(ce).text)),re("click",fe,()=>N(e(ce).selectedTopics,e(ce).text)),h(Ie,fe)});var Pe=w(te,2),Oe=c(Pe);z(()=>{L(X,`Survey: ${e(T).name??""}`),L(Q,e(P).question),L(Oe,`Question ${e(k)+1} of ${e(S).length??""}`)}),h(I,j)},J=I=>{var j=Rt(),K=w(c(j),2);re("click",K,_),h(I,j)};H(G,I=>{e(P)?I(V):I(J,!1)})}h(q,D)};H(b,q=>{e(T)?q(B,!1):q(M)},!0)}h(n,f)};H(l,n=>{e(t)?n(O):n(U,!1)})}h(o,g),Se()}export{Et as default};
